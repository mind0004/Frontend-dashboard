{"version":3,"sources":["scripts\\script.js"],"names":["timeNav","document","querySelector","nav","queueP","servingP","servingNumber","perfNumber","perfChartDOM","getContext","kegLevelChartDOM","storageLevelChartDOM","modalButton","querySelectorAll","modalWindow","modalH2","modalP","modalCloseButton","modalVisible","burgerMenu","burgerMenuSpan","mobileMenuVisible","updateInterval","updatePerformanceInterval","updateKegLevelInterval","updateStorageLevelInterval","data","update","updatePerformance","perfChart","kegLevelChart","updateKegLevel","storageLevelChart","updateStorageLevel","kegLevel","storageLevel","perf","init","updateTime","updateData","log","setInterval","displayData","displayPerf","updateKegLevelData","updateStorageLevelData","displayPerfChart","displayKegLevelChart","updateKegLevelChart","displayStorageLevelChart","updateStorageLevelChart","forEach","addEventListener","toggleModalWindow","toggleMobileMenu","JSON","parse","FooBar","getData","queueNumber","queue","length","textContent","serving","calcPerf","prototype","diff","a","filter","i","indexOf","currentS","id","push","order","newClient","previousS","servedClient","Date","now","neededTime","timePerClient","slice","shift","timeCombined","elem","averageTime","avgPerf","Math","floor","avgT","isNaN","updatePerfChart","Chart","PI","status","color","datasets","backgroundColor","taps","beerVar","short","keg","beer","toLowerCase","replace","level","labels","storage","name","amount","e","style","removeProperty","type","text","target","dataset","top","header","innerHTML","body","background","date","hours","getHours","min","getMinutes","sec","getSeconds"],"mappings":"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","file":"script.e75bdbfc.map","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n/* ==========================================================================\r\n   General\r\n   ========================================================================== */\r\n\r\n//*** Nav\r\nconst timeNav = document.querySelector(\"#timeNav p\");\r\nconst nav = document.querySelector(\"nav\");\r\n\r\n//*** Top-box\r\nconst queueP = document.querySelector(\"#top-box .queue p\");\r\nconst servingP = document.querySelector(\"#top-box .serving p\");\r\nconst servingNumber = document.querySelector(\"#top-box .serving p\");\r\nconst perfNumber = document.querySelector(\"#top-box .performance .perf-value\");\r\nconst perfChartDOM = document.querySelector(\"#perf-chart\").getContext(\"2d\");\r\n\r\n//*** Storage and Keg level canvas\r\nconst kegLevelChartDOM = document\r\n  .querySelector(\"#keg-level-chart\")\r\n  .getContext(\"2d\");\r\nconst storageLevelChartDOM = document\r\n  .querySelector(\"#storage-level-chart\")\r\n  .getContext(\"2d\");\r\n\r\n//*** Modal Window\r\nconst modalButton = document.querySelectorAll(\".display-modal-button\");\r\nconst modalWindow = document.querySelector(\"#modal\");\r\nconst modalH2 = document.querySelector(\"#modal h2\");\r\nconst modalP = document.querySelector(\"#modal p\");\r\nconst modalCloseButton = document.querySelector(\"#modal button\");\r\nlet modalVisible = false;\r\n\r\n//*** Mobile Menu (Burger Menu)\r\nconst burgerMenu = document.querySelector(\"#burger-menu\");\r\nconst burgerMenuSpan = document.querySelectorAll(\"#burger-menu span\");\r\nlet mobileMenuVisible = false;\r\n\r\n//*** Variables\r\nconst updateInterval = 1000; //update data every 1s;\r\nconst updatePerformanceInterval = 15000; //update performance every 15s\r\nconst updateKegLevelInterval = 1000; //update keg level every 1s\r\nconst updateStorageLevelInterval = 1000; //update storage level every 1s\r\n\r\nlet data,\r\n  update,\r\n  updatePerformance,\r\n  perfChart,\r\n  kegLevelChart,\r\n  updateKegLevel,\r\n  storageLevelChart,\r\n  updateStorageLevel;\r\n\r\nlet kegLevel = [];\r\nlet storageLevel = [];\r\n\r\n//perf is used to calculate performance\r\nlet perf = {\r\n  avgT: 10000,\r\n  avgPerf: 15000,\r\n  timePerClient: [15000],\r\n  currentS: [],\r\n  previousS: [],\r\n  order: {}\r\n};\r\n\r\n/* ==========================================================================\r\n   Initilaize\r\n   ========================================================================== */\r\ndocument.addEventListener(\"DOMContentLoaded\", init);\r\nfunction init() {\r\n  //Update the time in the navbar every 1s\r\n  setInterval(() => {\r\n    updateTime();\r\n  }, 1000);\r\n\r\n  //Get data and console log it\r\n  updateData();\r\n  console.log(data);\r\n\r\n  //Update and display data ever x seconds\r\n  update = setInterval(() => {\r\n    updateData();\r\n    displayData();\r\n  }, updateInterval);\r\n\r\n  // Calculate, update and display performance every x seconds\r\n  updatePerformance = setInterval(() => {\r\n    displayPerf();\r\n  }, updatePerformanceInterval);\r\n\r\n  //Update Keg level data and update chart every x seconds\r\n  updateKegLevel = setInterval(() => {\r\n    updateKegLevelData();\r\n  }, updateKegLevelInterval);\r\n\r\n  //Update Storage level data and update chart every x seconds\r\n  updateStorageLevel = setInterval(() => {\r\n    updateStorageLevelData();\r\n  }, updateStorageLevelInterval);\r\n\r\n  //Run functions on page load\r\n  displayData();\r\n  displayPerfChart();\r\n  displayKegLevelChart();\r\n  updateKegLevelData();\r\n  updateKegLevelChart();\r\n  displayStorageLevelChart();\r\n  updateStorageLevelData();\r\n  updateStorageLevelChart();\r\n  updateTime();\r\n\r\n  //Add event listener to Modal Window\r\n  modalButton.forEach(btn => {\r\n    btn.addEventListener(\"click\", toggleModalWindow);\r\n  });\r\n  modalCloseButton.addEventListener(\"click\", toggleModalWindow);\r\n\r\n  //Add event listener burger menu\r\n  burgerMenu.addEventListener(\"click\", toggleMobileMenu);\r\n}\r\n\r\n/* ==========================================================================\r\n   Update data\r\n   ========================================================================== */\r\nfunction updateData() {\r\n  data = JSON.parse(FooBar.getData());\r\n  //console.log(data);\r\n}\r\n\r\n/* ==========================================================================\r\n   Display data\r\n   ========================================================================== */\r\nfunction displayData() {\r\n  //Queue text number update\r\n  let queueNumber = data.queue.length;\r\n  if (queueNumber < 10) {\r\n    queueNumber = \"0\" + queueNumber;\r\n  }\r\n  queueP.textContent = queueNumber;\r\n\r\n  //Serving text number update\r\n  let servingNumber = data.serving.length;\r\n  if (servingNumber < 10) {\r\n    servingNumber = \"0\" + servingNumber;\r\n  }\r\n  servingP.textContent = servingNumber;\r\n\r\n  //Performance text and graph update\r\n  calcPerf();\r\n}\r\n\r\n/* ==========================================================================\r\n   Calculate Performance\r\n   ========================================================================== */\r\nfunction calcPerf() {\r\n  // Return the difference between two arrays\r\n  // Credits: https://stackoverflow.com/a/4026828\r\n  Array.prototype.diff = function(a) {\r\n    return this.filter(function(i) {\r\n      return a.indexOf(i) < 0;\r\n    });\r\n  };\r\n\r\n  //Empty current served array\r\n  perf.currentS = [];\r\n\r\n  // Add all current IDS to currentS array and the amount of orders\r\n  data.serving.forEach(serving => {\r\n    let id = serving.id;\r\n    perf.currentS.push(id);\r\n    perf.order[id] = serving.order.length;\r\n  });\r\n\r\n  // Get difference of currentS and previouS arrays\r\n  // If there's a difference, it either means there's a new client served or a client has been served\r\n  const newClient = perf.currentS.diff(perf.previousS); // new client\r\n  const servedClient = perf.previousS.diff(perf.currentS); // this client has been served now\r\n\r\n  //if new client or more than one, start time\r\n  if (newClient.length > 0) {\r\n    newClient.forEach(id => {\r\n      perf[id] = Date.now();\r\n    });\r\n  }\r\n\r\n  //if client or more than one have been served, stop time and get average time\r\n  if (servedClient.length > 0) {\r\n    servedClient.forEach(id => {\r\n      /*  Get current time and subtract the previous time of it.\r\n          The result is the needed time to serve this client.\r\n          Divide it by the amount of beers needed to serve\r\n          Get the average time per beer.\r\n          Add the average time to the timePerClient array\r\n      */\r\n      let neededTime = (Date.now() - perf[id]) / perf.order[id];\r\n      perf.timePerClient.push(neededTime);\r\n    });\r\n  }\r\n\r\n  //Use these console logs to understand this function\r\n\r\n  /*  console.log(\"Current:\" + JSON.stringify(perf.currentS));\r\n  console.log(\"Previous:\" + JSON.stringify(perf.previousS));\r\n  console.log(\"Difference 1: \" + JSON.stringify(newClient));\r\n  console.log(\"Difference 2: \" + JSON.stringify(servedClient));\r\n  console.log(\"AVG Time: \" + JSON.stringify(perf.timePerClient));\r\n  console.log(\"======\"); */\r\n\r\n  //Add this update rounds clients to be used for next round\r\n  perf.previousS = perf.currentS.slice();\r\n\r\n  //If there are more than 20 elements in the timePerClient array, remove the first ones until true\r\n  if (perf.timePerClient.length > 20) {\r\n    for (let i = 0; i > perf.timePerClient.length - 20; i++) {\r\n      perf.timePerClient.shift();\r\n    }\r\n  }\r\n}\r\n\r\n/* ==========================================================================\r\n   Display Performance\r\n   ========================================================================== */\r\nfunction displayPerf() {\r\n  //Get all times combined\r\n  let timeCombined = 0;\r\n  perf.timePerClient.forEach(elem => {\r\n    timeCombined += elem;\r\n  });\r\n\r\n  // Get the average time of all the combined times\r\n  const averageTime = timeCombined / perf.timePerClient.length;\r\n\r\n  //Calculcate percentage in relation to very fast serving of x seconds.\r\n  perf.avgPerf = Math.floor((perf.avgT / averageTime) * 100);\r\n  //console.log(perf.avgPerf);\r\n  if (isNaN(perf.avgPerf)) {\r\n    //no performance data available display N/A\r\n    perfNumber.textContent = \"N/A\";\r\n  } else {\r\n    //display performance\r\n    perfNumber.textContent = perf.avgPerf + \"%\";\r\n  }\r\n  updatePerfChart();\r\n}\r\n\r\n/* ==========================================================================\r\n   Display Performance Chart\r\n   ========================================================================== */\r\nfunction displayPerfChart() {\r\n  perfChart = new Chart(perfChartDOM, {\r\n    // The type of chart we want to create\r\n    type: \"doughnut\",\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n\r\n    // The data for our dataset\r\n    data: {\r\n      datasets: [\r\n        {\r\n          data: [50, 50],\r\n          backgroundColor: [\"#39B54A\"],\r\n          borderWidth: [0, 0]\r\n        }\r\n      ]\r\n    },\r\n\r\n    // Configuration options go here\r\n    options: {\r\n      legend: false,\r\n      rotation: Math.PI,\r\n      circumference: Math.PI,\r\n      events: []\r\n    }\r\n  });\r\n}\r\n\r\n/* ==========================================================================\r\n   Update Performance Chart\r\n   ========================================================================== */\r\nfunction updatePerfChart() {\r\n  if (isNaN(perf.avgPerf)) {\r\n    //keep previous chart\r\n  } else {\r\n    //update chart\r\n    let status;\r\n    if (perf.avgPerf >= 60) {\r\n      status = \"good\";\r\n    } else if (perf.avgPerf <= 30) {\r\n      status = \"bad\";\r\n    } else if (perf.avgPerf > 30 && perf.avgPerf < 60) {\r\n      status = \"okay\";\r\n    }\r\n    const color = {\r\n      bad: \"#ED1C24\",\r\n      okay: \"#F7931E\",\r\n      good: \"#39B54A\"\r\n    }[status];\r\n    perfChart.data.datasets[0].data = [perf.avgPerf, 100 - perf.avgPerf];\r\n    perfChart.data.datasets[0].backgroundColor = [color];\r\n    perfChart.update();\r\n  }\r\n}\r\n\r\n/* ==========================================================================\r\n   Display keg level chart\r\n   ========================================================================== */\r\nfunction displayKegLevelChart() {\r\n  kegLevelChart = new Chart(kegLevelChartDOM, {\r\n    type: \"bar\",\r\n    height: 400,\r\n    // The data for our dataset\r\n    data: {\r\n      labels: [\r\n        \"ELH\",\r\n        \"FTA\",\r\n        \"HBL\",\r\n        \"GTH\",\r\n        \"HEA\",\r\n        \"MIT\",\r\n        \"R26\",\r\n        \"RCH\",\r\n        \"SLR\",\r\n        \"SMP\"\r\n      ],\r\n      datasets: [\r\n        {\r\n          label: \"Keg level in cl\",\r\n          backgroundColor: [\"#39B54A\"],\r\n\r\n          data: [0, 10, 5, 2, 20, 30, 45]\r\n        }\r\n      ]\r\n    },\r\n\r\n    // Configuration options go here\r\n    options: {\r\n      legend: false,\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            ticks: {\r\n              suggestedMin: 0,\r\n              suggestedMax: 2500,\r\n              beginAtZero: true,\r\n              min: 0,\r\n              max: 2500,\r\n              stepSize: 500\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/* ==========================================================================\r\n   Update Keg Level Data\r\n   ========================================================================== */\r\nfunction updateKegLevelData() {\r\n  kegLevel = [];\r\n  data.taps.forEach(keg => {\r\n    let beerVar = keg.beer.toLowerCase().replace(/ /g, \"\");\r\n    //console.log(beerVar);\r\n    let short = {\r\n      elhefe: \"ELH\",\r\n      fairytaleale: \"FTA\",\r\n      hollabacklager: \"HBL\",\r\n      githop: \"GTH\",\r\n      hoppilyeverafter: \"HEA\",\r\n      mowintime: \"MIT\",\r\n      row26: \"R26\",\r\n      ruinedchildhood: \"RCH\",\r\n      sleighride: \"SLR\",\r\n      steampunk: \"SMP\"\r\n    }[beerVar];\r\n    //console.log(short);\r\n\r\n    let beer = {\r\n      name: keg.beer,\r\n      short: short,\r\n      level: keg.level\r\n    };\r\n\r\n    kegLevel.push(beer);\r\n  });\r\n\r\n  //console.log(kegLevel);\r\n  updateKegLevelChart();\r\n}\r\n\r\n/* ==========================================================================\r\n   Update Keg Level Chart\r\n   ========================================================================== */\r\nfunction updateKegLevelChart() {\r\n  kegLevelChart.data.labels = [];\r\n  kegLevelChart.data.datasets[0].data = [];\r\n  kegLevelChart.data.datasets[0].backgroundColor = [];\r\n\r\n  let status;\r\n\r\n  kegLevel.forEach(keg => {\r\n    if (keg.level >= 1500) {\r\n      status = \"good\";\r\n    } else if (keg.level <= 500) {\r\n      status = \"bad\";\r\n    } else if (keg.level > 500 && keg.level < 1500) {\r\n      status = \"okay\";\r\n    }\r\n\r\n    const color = {\r\n      bad: \"#ED1C24\",\r\n      okay: \"#F7931E\",\r\n      good: \"#39B54A\"\r\n    }[status];\r\n\r\n    kegLevelChart.data.labels.push(keg.short);\r\n    kegLevelChart.data.datasets[0].data.push(keg.level);\r\n    kegLevelChart.data.datasets[0].backgroundColor.push(color);\r\n  });\r\n\r\n  kegLevelChart.update();\r\n}\r\n\r\n/* ==========================================================================\r\n   Display storage level chart\r\n   ========================================================================== */\r\nfunction displayStorageLevelChart() {\r\n  storageLevelChart = new Chart(storageLevelChartDOM, {\r\n    type: \"bar\",\r\n    // The data for our dataset\r\n    data: {\r\n      labels: [\r\n        \"ELH\",\r\n        \"FTA\",\r\n        \"HBL\",\r\n        \"GTH\",\r\n        \"HEA\",\r\n        \"MIT\",\r\n        \"R26\",\r\n        \"RCH\",\r\n        \"SLR\",\r\n        \"SMP\"\r\n      ],\r\n      datasets: [\r\n        {\r\n          label: \"Amount of kegs in storage\",\r\n          backgroundColor: [\"#39B54A\"],\r\n\r\n          data: [0, 10, 5, 2, 20, 30, 45]\r\n        }\r\n      ]\r\n    },\r\n\r\n    // Configuration options go here\r\n    options: {\r\n      legend: false,\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            ticks: {\r\n              suggestedMin: 0,\r\n              suggestedMax: 20,\r\n              beginAtZero: true,\r\n              min: 0,\r\n              max: 10,\r\n              stepSize: 1\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/* ==========================================================================\r\n   Update Storage Level Data\r\n   ========================================================================== */\r\nfunction updateStorageLevelData() {\r\n  storageLevel = [];\r\n  data.storage.forEach(storage => {\r\n    let beerVar = storage.name.toLowerCase().replace(/ /g, \"\");\r\n    //console.log(beerVar);\r\n    let short = {\r\n      elhefe: \"ELH\",\r\n      fairytaleale: \"FTA\",\r\n      hollabacklager: \"HBL\",\r\n      githop: \"GTH\",\r\n      hoppilyeverafter: \"HEA\",\r\n      mowintime: \"MIT\",\r\n      row26: \"R26\",\r\n      ruinedchildhood: \"RCH\",\r\n      sleighride: \"SLR\",\r\n      steampunk: \"SMP\"\r\n    }[beerVar];\r\n    //console.log(short);\r\n\r\n    let beer = {\r\n      name: storage.name,\r\n      short: short,\r\n      level: storage.amount\r\n    };\r\n\r\n    storageLevel.push(beer);\r\n  });\r\n\r\n  //console.log(kegLevel);\r\n  updateStorageLevelChart();\r\n}\r\n\r\n/* ==========================================================================\r\n   Update Storage Level Chart\r\n   ========================================================================== */\r\nfunction updateStorageLevelChart() {\r\n  storageLevelChart.data.labels = [];\r\n  storageLevelChart.data.datasets[0].data = [];\r\n  storageLevelChart.data.datasets[0].backgroundColor = [];\r\n\r\n  let status;\r\n\r\n  storageLevel.forEach(storage => {\r\n    if (storage.level >= 6) {\r\n      status = \"good\";\r\n    } else if (storage.level <= 2) {\r\n      status = \"bad\";\r\n    } else if (storage.level > 2 && storage.level < 6) {\r\n      status = \"okay\";\r\n    }\r\n\r\n    const color = {\r\n      bad: \"#ED1C24\",\r\n      okay: \"#F7931E\",\r\n      good: \"#39B54A\"\r\n    }[status];\r\n\r\n    storageLevelChart.data.labels.push(storage.short);\r\n    storageLevelChart.data.datasets[0].data.push(storage.level);\r\n    storageLevelChart.data.datasets[0].backgroundColor.push(color);\r\n  });\r\n\r\n  storageLevelChart.update();\r\n}\r\n\r\n/* ==========================================================================\r\n   Toggle Modal Window\r\n   ========================================================================== */\r\nfunction toggleModalWindow(e) {\r\n  if (modalVisible) {\r\n    //Close Modal Window\r\n    modalWindow.style.removeProperty(\"top\");\r\n    console.log(\"Close modal\");\r\n  } else {\r\n    //Open Modal Window\r\n    const type = e.target.dataset.type;\r\n    const text = {\r\n      keg: {\r\n        header: \"KEG LEVEL\",\r\n        body:\r\n          \"Keg level displays the amount of beer left in a keg. The unit is in cl.<br /><br />Abbreviations:<br />ELH : El Hefe<br />FTA : Fairy Tale Ale<br />HBL : Hollaback Lager<br />GTH : GitHop<br />HEA : Hoppily Ever After<br />MIT : Mowintime<br />R26 : Row 26<br />RCH : Ruined Childhood<br />SLR : Sleighride<br />SMP : Steampunk\"\r\n      },\r\n      storage: {\r\n        header: \"STORAGE LEVEL\",\r\n        body:\r\n          \"Storage level displays the amount of kegs in the storage room.<br /><br />Abbreviations:<br />ELH : El Hefe<br />FTA : Fairy Tale Ale<br />HBL : Hollaback Lager<br />GTH : GitHop<br />HEA : Hoppily Ever After<br />MIT : Mowintime<br />R26 : Row 26<br />RCH : Ruined Childhood<br />SLR : Sleighride<br />SMP : Steampunk\"\r\n      },\r\n      topBox: {\r\n        header: \"OVERVIEW\",\r\n        body:\r\n          \"QUEUE displays the amount of clients waiting in line.<br /><br />SERVING displays the amount of clients currently beeing served<br /><br />PERFORMANCE displays the all around performance which is calculated based on the needed time to serve the last 20 beers. An average time is calculated and compared to 10s/beer which would be considered 100%. All performance over 60% is considered as very good!\"\r\n      }\r\n    }[type];\r\n\r\n    modalWindow.style.top = \"0px\";\r\n    modalH2.textContent = text.header;\r\n    modalP.innerHTML = text.body;\r\n    console.log(\"Open Modal\");\r\n  }\r\n  modalVisible = !modalVisible;\r\n}\r\n\r\n/* ==========================================================================\r\n   Toggle Mobile Menu on click Burger Menu\r\n   ========================================================================== */\r\nfunction toggleMobileMenu() {\r\n  if (mobileMenuVisible) {\r\n    //close menu\r\n    nav.style.removeProperty(\"top\");\r\n    burgerMenuSpan.forEach(span => {\r\n      span.style.removeProperty(\"background\");\r\n    });\r\n  } else {\r\n    //open menu\r\n    nav.style.top = \"0px\";\r\n    burgerMenuSpan.forEach(span => {\r\n      span.style.background = \"#e9e9e9\";\r\n    });\r\n  }\r\n  mobileMenuVisible = !mobileMenuVisible;\r\n}\r\n\r\n/* ==========================================================================\r\n   Update the time clock in the nav\r\n   ========================================================================== */\r\nfunction updateTime() {\r\n  const date = new Date();\r\n  const hours = date.getHours() >= 10 ? date.getHours() : \"0\" + date.getHours();\r\n  const min =\r\n    date.getMinutes() >= 10 ? date.getMinutes() : \"0\" + date.getMinutes();\r\n  const sec =\r\n    date.getSeconds() >= 10 ? date.getSeconds() : \"0\" + date.getSeconds();\r\n  timeNav.textContent = hours + \":\" + min + \":\" + sec;\r\n}\r\n"]}